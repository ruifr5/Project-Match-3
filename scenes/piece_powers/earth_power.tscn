[gd_scene load_steps=3 format=2]

[ext_resource path="res://art/placeholders/Sinker.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends Power

export (String) var new_piece_color = \"useless\"

func exec(enemy_grid: MyGrid, origin: Vector2):
#	get random non-frozen piece
	var piece = try_get_random_piece(enemy_grid, new_piece_color)
	piece.add_child(self)
	
	var particle_time = emit_particle_effect(origin, piece.position, Color.green)
	
##	store old piece info
#	var backup_color = piece.color
#	var backup_sprite_texture = piece.get_sprite_texture()
	
#	inutilize piece
	piece.color = new_piece_color
	piece.set_sprite_texture($Sprite.texture)
	piece.set_sprite_color(Color(0.7, 1, 0.7, 1))
	
#	wait timer
	yield(get_tree().create_timer(particle_time), \"timeout\")
	
##	restore piece
#	piece.color = backup_color
#	piece.set_sprite_texture(backup_sprite_texture)

	queue_free()
"

[node name="earth_power" type="Node2D"]
script = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
visible = false
texture = ExtResource( 1 )
